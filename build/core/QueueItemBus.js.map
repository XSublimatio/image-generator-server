{
  "version": 3,
  "sources": ["../../src/core/QueueItemBus.ts"],
  "sourcesContent": ["import { Queue } from '@prisma/client';\nimport prisma from '../lib/prisma';\nimport { TypedEmitter } from 'tiny-typed-emitter';\n\ninterface ITypedEventBus {\n  newQueueItem: (queueItem: Queue) => void;\n}\n\nclass QueueItemBus extends TypedEmitter<ITypedEventBus> {\n  constructor() {\n    super();\n\n    prisma.$use(async (params, next) => {\n      const res = await next(params);\n\n      if (params.model === 'Queue' && params.action === 'create') {\n        this.emit('newQueueItem', res);\n      }\n    });\n  }\n}\n\nexport default QueueItemBus;\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA,oBAAmB;AACnB,gCAA6B;AAM7B,2BAA2B,uCAA6B;AAAA,EACtD,cAAc;AACZ;AAEA,0BAAO,KAAK,CAAO,QAAQ,SAAS;AAClC,YAAM,MAAM,MAAM,KAAK;AAEvB,UAAI,OAAO,UAAU,WAAW,OAAO,WAAW,UAAU;AAC1D,aAAK,KAAK,gBAAgB;AAAA;AAAA;AAAA;AAAA;AAMlC,IAAO,uBAAQ;",
  "names": []
}
